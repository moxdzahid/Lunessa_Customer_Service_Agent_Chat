<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Customer Service Chat</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/906/906349.png" type="image/png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Updated CSS link to use modular structure -->
    <link rel="stylesheet" href="ai_agent_modular.css">
    
    <!-- Load modules in correct order -->
    <script src="js/theme-manager.js"></script>
    <script src="js/chat-core.js"></script>
    <script src="js/voice-handler.js"></script>
    <script src="js/sidebar-manager.js"></script>
    <script src="js/auto_resize_input.js"></script>
    <script src="js/file-manager.js"></script>
    <script src="js/event-handler.js"></script>
    <script src="js/main.js"></script>
    <script src="js/sendBtn_handler.js"></script>
    <script src="js/handle_agent_satisfaction_data.js"></script>
    <script src="js/agent_chat_handler.js"></script>
    <script src="js/scroll_to_bottom.js"></script>
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>
        
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header"></div>
              
            <div class="conversations-list">
                <div class="conversation-item active">
                    <div class="conversation-preview">
                        <div class="conversation-title">Customer Service Chat</div>
                        <div class="conversation-snippet">Hi! I'm your virtual assistant...</div>
                    </div>                  
                </div>
            </div>
            
            <div class="sidebar-section">
                <h4>Quick actions</h4>
                <div class="sidebar-item" id="talkToHuman">
                    <span class="icon">üë§</span>
                    Talk to human
                </div>
                <div class="sidebar-item" id="callSupport">
                    <span class="icon">üìû</span>
                    Call support
                </div>
                <div class="sidebar-item">
                    <span class="icon">üîí</span>
                    Privacy policy
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="main-chat">
            <div class="chat-header">
                <div class="chat-title">
                    <button class="sidebar-toggle" id="sidebarToggle" title="Toggle sidebar">
                        <span class="sidebar-toggle-icon">‚ò∞</span>
                    </button>
                    <div class="ai-status">
                        <div class="status-dot"></div>
                        AI Assistant
                    </div>
                    <div style="margin-left: 16px; font-size: 13px; color: var(--text-secondary);">Online</div>
                </div>
                <div class="chat-actions">
                    <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                        <div class="theme-toggle-slider">üåô</div>
                    </button>
                    <button class="header-btn new-chat-btn" id="newChatBtn">‚ú® New chat</button>
                    <button class="header-btn end-chat-btn" id="endChatBtn">üõë End chat</button>
                </div>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="messages-container" id="messagesContainer">
                    
                </div>
                <div class="typing-indicator" id="typingIndicator">
                    <div class="messages-container">
                        <div class="message ai">
                        <div class="message-avatar ai-avatar">AI</div>
                        <div class="message-wrapper">
                            <div class="message-content">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
                <div class="chat-input-container" id="chatInputContainer">
                <div class="chat-input-wrapper">
                    <div class="input-wrapper" id="dropZone">
                        <div class="input-content">
                            <textarea 
                                id="messageInput" 
                                class="message-input" 
                                placeholder="Type your message or drop files..."
                                rows="1"
                            ></textarea>
                        </div>
                        <div class="input-actions">
                            <input type="file" id="fileInput" hidden multiple accept="image/*,.txt,.json,.pdf,.doc,.docx,.csv,.xml,.md,.rtf">
                            <button class="input-btn file-btn" id="fileBtn" title="Add files">
                                <mat-icon _ngcontent-ng-c2475341338="" role="img" class="mat-icon notranslate ng-tns-c2475341338-8 icon-filled gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="attach_file" fonticon="attach_file">attach_file</mat-icon>
                            </button>
                            <button class="input-btn voice-btn" id="voiceBtn" title="Voice input">
                                <mat-icon _ngcontent-ng-c2475341338="" role="img" class="mat-icon notranslate ng-tns-c2475341338-8 icon-filled gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="mic" fonticon="mic">mic</mat-icon>
                            </button>
                            <button class="input-btn send-btn" id="sendBtn" title="Send message">‚û§</button>
                        </div>
                    </div>
                    <div id="filePreview" class="file-preview"></div>
                </div>
                <div class="processing-notification" id="processingNotification">
                    AI is processing your message...
                </div>
            </div>
            </div>

            

            


        </div>
    </div>

    <!-- Enhanced Rating Modal -->
    <div class="modal" id="ratingModal">
        <div class="modal-content">
            <div class="icon">‚≠ê</div>
            <h3>Rate Your Experience</h3>
            <p>Your feedback is valuable to us! Please rate your chat experience and let us know how we did.</p>
            
            <div class="rating-container">
                <div class="rating-stars" id="ratingStars">
                    <span class="star" data-rating="1">‚≠ê</span>
                    <span class="star" data-rating="2">‚≠ê</span>
                    <span class="star" data-rating="3">‚≠ê</span>
                    <span class="star" data-rating="4">‚≠ê</span>
                    <span class="star" data-rating="5">‚≠ê</span>
                </div>
                <div class="rating-labels">
                    <span>Poor</span>
                    <span>Excellent</span>
                </div>
            </div>
            
            <textarea 
                id="feedbackText" 
                class="feedback-textarea" 
                placeholder="Share your thoughts about the service... (optional)"
                maxlength="500"
            ></textarea>
            
            <div>
                <button class="modal-btn" id="submitRating">Submit Review</button>
                <button class="modal-btn secondary" id="skipRating">Maybe Later</button>
            </div>
        </div>
    </div>
</body>
</html>